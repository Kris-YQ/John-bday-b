css

:root{
  --bg:#0b0f1a;
  --text:#f4f1ea;
  --muted:rgba(244,241,234,.74);
  --shadow: 0 26px 70px rgba(0,0,0,.55);
  --scriptFont: "Great Vibes", cursive;
  --bodyFont: "Libre Baskerville", serif;
  --gold:#d4af37;
  --gold2:#f2df9a;
  --glass: rgba(0,0,0,.18);
  --border: rgba(255,255,255,.14);
  --borderGold: rgba(212,175,55,.55);
}

*{ box-sizing:border-box; }
html, body{
  width:100%;
  height:100%;
  margin:0;
  background: var(--bg);
  overflow:hidden;
  overscroll-behavior:none;
  -webkit-text-size-adjust: 100%;
}
body{
  color:var(--text);
  font-family:var(--bodyFont);
  display:flex;
  align-items:center;
  justify-content:center;
  padding: max(12px, env(safe-area-inset-top)) 12px max(12px, env(safe-area-inset-bottom));
}

.frame{
  width:min(980px, 96vw);
  height:min(720px, 92dvh);
  position:relative;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.12);
  border-radius:28px;
  box-shadow: var(--shadow);
  background-color: var(--bg);
  background-image:
    radial-gradient(120% 120% at 10% 0%, rgba(212,175,55,.10) 0%, rgba(0,0,0,0) 60%),
    linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.45)),
    url("bg.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* iPhone / mobile: full screen */
@media (max-width: 1024px){
  body{ padding:0; display:block; }
  .frame{
    position:fixed;
    inset:0;
    width:100%;
    height:100dvh;
    border:none;
    border-radius:0;
  }
}

/* ===== Scene base ===== */
.scene{
  position:absolute;
  inset:0;
  display:none;
  overflow:hidden;
  padding: clamp(14px, 2.2vw, 22px);
  padding-top: max(clamp(14px, 2.2vw, 22px), env(safe-area-inset-top));
  padding-bottom: max(clamp(14px, 2.2vw, 22px), env(safe-area-inset-bottom));
}
.scene.active{ display:block; }

.content{
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  min-height:0;
}

/* ===== Typography ===== */
.hero{ text-align:center; flex: 0 0 auto; }
.title{
  font-family:var(--scriptFont);
  font-weight:400;
  margin: 8px 0 2px;
  font-size: clamp(34px, 4.4vw, 62px);
  text-shadow: 0 16px 30px rgba(0,0,0,.35);
  letter-spacing:.2px;
}
.subtitle{
  margin: 0;
  color: var(--muted);
  font-size: clamp(12px, 1.6vw, 15px);
  text-shadow: 0 10px 20px rgba(0,0,0,.35);
}
.hint{
  margin: 10px 0 0;
  color: rgba(243,241,234,.78);
  font-size: 12px;
  text-shadow: 0 10px 20px rgba(0,0,0,.35);
  text-align:center;
  flex: 0 0 auto;
}

/* =========================================================
   Scene 1 (CENTER STAGE)
   - 标题固定中间逐词出现
   - 标题淡出后，信封在同位置淡入
   - Tap 提示文：信封下方两三行（不贴底）
   ========================================================= */

#scene1 .content{ justify-content:center; }

#scene1 .centerStage{
  position:relative;
  width:100%;
  height: 78dvh;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* 标题（hero）固定中心点位 */
#scene1 .hero{
  position:absolute;
  left:50%;
  top:45%;
  transform: translate(-50%,-50%);
  width: min(92vw, 720px);
  text-align:center;
  margin:0;
  opacity:1; /* 由 span.w 控制逐词淡入 */
}

/* 逐词动画：JS 注入 span.w */
#scene1 .title{ margin:0; }
#scene1 .title .w{
  display:inline-block;
  opacity:0;
  transform: translateY(10px);
  animation: wordIn .9s ease forwards;
  animation-delay: var(--d);
}
@keyframes wordIn{
  to{ opacity:1; transform: translateY(0); }
}

/* 标题整体淡出 */
#scene1.s1-title-out .hero{
  transition: opacity .9s ease, transform .9s ease;
  opacity:0;
  transform: translate(-50%,-58%);
}

/* 信封：同中心点位 */
#scene1 .letter-wrap{
  position:absolute;
  left:50%;
  top:45%;
  transform: translate(-50%,-50%);
  width:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition: opacity .8s ease, transform .8s ease;
}
#scene1.s1-envelope-in .letter-wrap{
  opacity:1;
  transform: translate(-50%,-50%) scale(1);
  pointer-events:auto;
}

/* 提示文：信封下方两三行 */
#scene1 .hint{
  position:absolute;
  left:50%;
  top: calc(45% + clamp(190px, 28vw, 230px));
  transform: translateX(-50%);
  margin:0;
  opacity:0;
  transition: opacity .8s ease;
}
#scene1.s1-envelope-in .hint{ opacity:1; }

/* 碎✨掉落层 */
#scene1 .sparkRain{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  opacity:0;
}
#scene1.s1-spark .sparkRain{ opacity:1; }

#scene1 .spark{
  position:absolute;
  top:-20px;
  font-size: 14px;
  opacity:0;
  filter: drop-shadow(0 8px 18px rgba(0,0,0,.35));
  animation: fall var(--dur) ease-in forwards;
  animation-delay: var(--delay);
}
@keyframes fall{
  0%   { transform: translateY(0) scale(.9) rotate(0deg); opacity:0; }
  15%  { opacity: .9; }
  100% { transform: translateY(var(--dy)) scale(1) rotate(var(--rot)); opacity:0; }
}

/* ===== Envelope ===== */
.envelopeStage{
  position:relative;
  width: min(520px, 88vw);
  aspect-ratio: 711 / 428;
  display:flex;
  align-items:center;
  justify-content:center;
  filter: drop-shadow(0 26px 60px rgba(0,0,0,.55));
  user-select:none;
  -webkit-user-select:none;
}
.envelopeStage img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  filter: contrast(1.06) saturate(1.10) brightness(1.02);
}
.waxBtn{
  position:absolute;
  left:50%;
  top:58%;
  transform: translate(-50%,-50%);
  width:92px;
  height:92px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.22);
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.12) 0%, rgba(0,0,0,.02) 50%, rgba(0,0,0,.12) 100%);
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
}
.waxBtn:active{ transform: translate(-50%,-50%) scale(.985); }

.sparkle{
  position:absolute;
  inset:-50px;
  pointer-events:none;
  opacity:0;
  background: radial-gradient(circle at 50% 55%, rgba(212,175,55,.35), transparent 60%);
}
.opened .waxBtn{ animation: crack .55s ease forwards; }
.opened .sparkle{ animation: glow .9s ease forwards; }

@keyframes crack{
  0%{transform: translate(-50%,-50%) scale(1); opacity:1}
  70%{transform: translate(-50%,-50%) scale(1.03); opacity:1}
  100%{transform: translate(-50%,-50%) scale(.85); opacity:0}
}
@keyframes glow{
  0%{opacity:0}
  40%{opacity:.85}
  100%{opacity:0}
}

/* =========================================================
   Scene 2: cakes list (NO hover / NO selected)
   ========================================================= */
#scene2{
  overflow:auto;
  -webkit-overflow-scrolling: touch;
}
#scene2::-webkit-scrollbar{ width:0; height:0; display:none; }

.cakeCol{
  flex:1;
  width: min(920px, 100%);
  min-height:0;
  display:flex;
  flex-direction:column;
  gap: 12px;
  padding-top: 12px;
}

.cakePick{
  width: 100%;
  border:1px solid var(--border);
  background: var(--glass);
  border-radius:18px;
  padding:12px;
  cursor:pointer;
  transition: background .18s ease, transform .12s ease;
  box-shadow: 0 14px 34px rgba(0,0,0,.30);
  overflow:hidden;
  -webkit-tap-highlight-color: transparent;
  text-align:left;
}

/* 手机点击反馈（轻微） */
.cakePick:active{
  transform: scale(.995);
  background: rgba(0,0,0,.22);
}

.cakeMedia{
  width:100%;
  border-radius:16px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.12);
  position:relative;
}
.cakeMedia::before{ content:""; display:block; padding-top: 62%; } /* 矩形比例 */

.cakeImg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit: contain;  /* 关键：完整显示 */
  padding: 6px;         /* 想更大：改 4px；想更留白：改 8px */
  transform: none;
}

.cakeName{
  margin-top:10px;
  text-align:center;
  font-size: 16px;
  font-weight: 700;
  color: rgba(243,241,234,.92);
  text-shadow: 0 10px 20px rgba(0,0,0,.25);
}

/* =========================================================
   Scene 3: chosen cake (keep as-is)
   ========================================================= */
.reveal{
  flex:1;
  width:100%;
  min-height:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 12px 0 10px;
}
#revealCakeBtn{
  border:none;
  background:transparent;
  padding:0;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  -webkit-tap-highlight-color: transparent;
}
#revealCakeBtn:active{ transform: scale(.993); }

.chosenFrame{
  width: min(520px, 92vw);
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.12);
  box-shadow: 0 18px 48px rgba(0,0,0,.35);
  position:relative;
}
.chosenFrame::before{ content:""; display:block; padding-top: 75%; }
#chosenCakeImg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit: contain;
  padding: 10px;
}

/* ===== Modal (keep as-is) ===== */
.modal{
  position:fixed;
  inset:0;
  z-index:9999;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: max(16px, env(safe-area-inset-top)) 16px max(16px, env(safe-area-inset-bottom));
}
.modal.hidden{ display:none; }
.modal-backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.22);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
.modal-card{
  position:relative;
  width:min(680px, 92vw);
  border-radius:22px;
  background:
    radial-gradient(120% 120% at 30% 10%, rgba(212,175,55,.22) 0%, rgba(0,0,0,0) 55%),
    linear-gradient(180deg, rgba(22,12,14,.96), rgba(14,10,14,.96));
  border:1px solid var(--borderGold);
  box-shadow: 0 34px 96px rgba(0,0,0,.55);
  padding: 22px 20px 18px;
  text-align:center;
  transform: translateY(18px) scale(.985);
  opacity:0;
  animation: pop .28s ease forwards;
}
@keyframes pop{ to{ transform: translateY(0) scale(1); opacity:1; } }

.card-title{
  font-size: 26px;
  color: var(--gold2);
  margin-bottom: 10px;
  text-shadow: 0 10px 22px rgba(0,0,0,.35);
}
.card-line{
  font-size: 14px;
  line-height: 1.6;
  color: rgba(243,241,234,.94);
}
.card-line.soft{
  color: rgba(243,241,234,.82);
  margin-top: 8px;
}
.modal-close{
  position:absolute;
  top:12px;
  right:12px;
  width:36px;
  height:36px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.20);
  background: rgba(0,0,0,.28);
  color: rgba(243,241,234,.92);
  font-size:20px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  -webkit-tap-highlight-color: transparent;
}

@media (max-width: 640px){
  .title{
    font-size: clamp(30px, 9vw, 44px);
    line-height: 1.05;
  }
}

@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
}